Main logic of the project
